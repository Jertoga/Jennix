<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.7.1/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.7.1/firebase-auth.js";

    const firebaseConfig = {
        apiKey: "AIzaSyDsb7m4EijaU3NNxwoos8y6egI29nfbChk",
        authDomain: "jennix-777e1.firebaseapp.com",
        projectId: "jennix-777e1",
        storageBucket: "jennix-777e1.appspot.com",
        messagingSenderId: "673075142639",
        appId: "1:673075142639:web:ea93e3ae1b244463ca201a",
        measurementId: "G-HKJ85NVGF4"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const signUpForm = document.getElementById("signUpForm");
    const signInForm = document.getElementById("signInForm");
    const logoutBtn = document.getElementById("logoutBtn");
    const authButton = document.getElementById("authButton");

    signUpForm.onsubmit = async (e) => {
        e.preventDefault();
        const email = document.getElementById("signUpEmail").value;
        const password = document.getElementById("signUpPassword").value;
        try {
            await createUserWithEmailAndPassword(auth, email, password);
            closeSignUpModal();
        } catch (err) {
            alert(err.message);
        }
    };

    signInForm.onsubmit = async (e) => {
        e.preventDefault();
        const email = document.getElementById("signInEmail").value;
        const password = document.getElementById("signInPassword").value;
        try {
            await signInWithEmailAndPassword(auth, email, password);
            closeSignInModal();
        } catch (err) {
            alert(err.message);
        }
    };

    logoutBtn.onclick = () => {
        signOut(auth);
    };

    onAuthStateChanged(auth, user => {
        if (user) {
            logoutBtn.style.display = "inline-block";
            authButton.style.display = "none";
        } else {
            logoutBtn.style.display = "none";
            authButton.style.display = "inline-block";
        }
    });

    // Modal switching logic
    window.openSignInModal = () => {
        document.getElementById("signInModal").style.display = "block";
    };
    window.closeSignInModal = () => {
        document.getElementById("signInModal").style.display = "none";
    };
    window.openSignUpModal = () => {
        document.getElementById("signUpModal").style.display = "block";
    };
    window.closeSignUpModal = () => {
        document.getElementById("signUpModal").style.display = "none";
    };
    window.switchToSignUp = () => {
        closeSignInModal();
        openSignUpModal();
    };
    window.switchToSignIn = () => {
        closeSignUpModal();
        openSignInModal();
    };
</script>
